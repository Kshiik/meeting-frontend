"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[493],{1640:(e,t,n)=>{n.d(t,{lh:()=>x,SX:()=>m,y$:()=>h,qM:()=>p});var i=n(3266),a=n(4493),r=n(3495),s=n(6559),l=n(183),o=n(9748),d=n(6373),c=n(2572);let u={day:r.A,week:s.A,month:l.A,year:o.A},h=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=new URLSearchParams;e.roomId&&t.append("room_id",e.roomId.toString()),e.name&&t.append("name",e.name),e.type&&t.append("type",e.type),e.date&&t.append("date",e.date),e.officeId&&t.append("office_id",e.officeId.toString());let n="http://127.0.0.1:8000/api/event?".concat(t.toString());console.log("Запрос:",n);let r=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json",jwt:"".concat(localStorage.getItem("jwt"))}});if(!r.ok){let e=await r.text();throw Error("Ошибка: ".concat(r.status," - ").concat(e))}let s=(await r.json()).data.map(e=>{let t=new Date("".concat(e.date,"T").concat(e.timeStart,"Z")),n=new Date("".concat(e.date,"T").concat(e.timeEnd,"Z")),i=e=>e.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/,/g,"");return{...e,timeStart:i(t),timeEnd:i(n)}}),o=function(e){let t=new Date,n=(0,l.A)(t,24),i=[];for(let t of e){if(t.recurrenceParent)continue;i.push(t);let{recurrenceTypeValue:e,recurrenceInterval:r=1,recurrenceEnd:s}=t;if(!e||!(e in u))continue;let l=u[e],o=s?(0,a.A)(s):n,h=l((0,a.A)(t.date),r);for(;!(0,d.A)(h,o)&&!(0,d.A)(h,n);){let e={...t,id:t.id,date:(0,c.A)(h,"yyyy-MM-dd"),recurrenceParent:t,originalDate:t.date};i.push(e),h=l(h,r)}}return i}(s),h=(0,i.A)(new Date);return o.filter(t=>"true"===e.isArchived?(0,a.A)(t.date)<h:"false"!==e.isArchived||(0,a.A)(t.date)>=h).sort((t,n)=>{let i=new Date("".concat(t.date,"T").concat(t.timeStart)),a=new Date("".concat(n.date,"T").concat(n.timeStart));return e.descOrder?a.getTime()-i.getTime():i.getTime()-a.getTime()})}catch(e){throw console.error("Ошибка при запросе мероприятий:",e),e}},x=async e=>{let t=await fetch("http://127.0.0.1:8000/api/event",{method:"POST",headers:{"Content-Type":"application/json",jwt:"".concat(localStorage.getItem("jwt"))},body:JSON.stringify(e)});if(!t.ok)throw Error("Ошибка создания: ".concat(t.status));return await t.json()},p=async(e,t)=>{let n=await fetch("http://127.0.0.1:8000/api/event/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",jwt:"".concat(localStorage.getItem("jwt"))},body:JSON.stringify(t)});if(!n.ok)throw Error("Ошибка обновления: ".concat(n.status))},m=async e=>{let t=await fetch("http://127.0.0.1:8000/api/event/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",jwt:"".concat(localStorage.getItem("jwt"))}});if(!t.ok)throw Error("Ошибка удаления: ".concat(t.status))}},4008:(e,t,n)=>{n.d(t,{S:()=>i,Y:()=>a});let i=async()=>{let e=await fetch("http://127.0.0.1:8000/api/employee",{method:"GET",headers:{"Content-Type":"application/json",jwt:"".concat(localStorage.getItem("jwt"))}});if(!e.ok)throw Error("Ошибка: ".concat(e.status));return e.json()},a=async(e,t)=>{let n=localStorage.getItem("jwt");if(!(await fetch("http://127.0.0.1:8000/api/employee/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",jwt:"".concat(n)},body:JSON.stringify(t)})).ok)throw Error("Ошибка обновления данных")}},4113:(e,t,n)=>{n.d(t,{G:()=>h});var i=n(7876),a=n(4232),r=n(5596),s=n(7866),l=n(3034),o=n(7018),d=n(8523),c=n(4868);let u=e=>{let{open:t,onClose:n,title:a="Подтверждение",message:u="Вы уверены?",confirmText:h="Да",cancelText:x="Нет"}=e;return(0,i.jsxs)(r.A,{open:t,onClose:()=>n(!1),maxWidth:"sm",fullWidth:!0,children:[(0,i.jsx)(s.A,{children:a}),(0,i.jsx)(l.A,{children:(0,i.jsx)(o.A,{children:u})}),(0,i.jsxs)(d.A,{children:[(0,i.jsx)(c.A,{onClick:()=>n(!1),color:"primary",children:x}),(0,i.jsx)(c.A,{onClick:()=>n(!0),color:"primary",variant:"contained",children:h})]})]})},h=()=>{let[e,t]=(0,a.useState)(!1),[n,r]=(0,a.useState)({}),[s,l]=(0,a.useState)(null),o=e=>{t(!1),s&&(s(e),l(null))};return{confirm:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(e),t(!0),new Promise(e=>{l(()=>e)})},ConfirmComponent:()=>(0,i.jsx)(u,{open:e,onClose:o,title:n.title||"Подтверждение",message:n.message||"Вы уверены?",confirmText:n.confirmText||"Да",cancelText:n.cancelText||"Нет"})}}},7133:(e,t,n)=>{n.d(t,{A:()=>G});var i=n(7876),a=n(4232),r=n(8207),s=n(5596),l=n(7018),o=n(3290),d=n(8713),c=n(6120),u=n(656),h=n(6378),x=n(8284),p=n(9017),m=n(4755),f=n(2033),g=n(946),j=n(4868),A=n(7907),y=n(5939),v=n(8421),b=n(4397),C=n(9862),w=n(4970),S=n(6557),D=n.n(S);n(2204);var I=n(1874),M=n(9037),T=n(8490),E=n(7578),Y=n(2430),k=n(1640),H=n(3316);function R(e,t,n){let i=D()("2024-01-01 ".concat(e),"YYYY-MM-DD HH:mm:ss"),a=D()("2024-01-01 ".concat(t),"YYYY-MM-DD HH:mm:ss"),r=(n-20)/960,s=i.startOf("day").add(6,"hour"),l=i.diff(s,"minute");return{left:Math.max(l*r+10,10),width:Math.max((a.diff(s,"minute")-l)*r,0)}}let O=["rgba(50, 193, 255, 0.7)","rgba(50, 67, 255, 0.7)","rgba(50, 122, 255, 0.7)","rgba(42, 200, 71, 0.7)"],W=["6:00","10:00","14:00","18:00","22:00"],N=e=>{let{date:t,roomId:n,currentEvent:r,onOverlapCheck:s}=e,{showNotification:o}=(0,H.h)(),[d,c]=(0,a.useState)([]),[u,h]=(0,a.useState)(!0),[x,p]=(0,a.useState)(0),m=(0,a.useRef)(null),[f,g]=(0,a.useState)(!1),j=async()=>{try{h(!0);let e=await (0,k.y$)({roomId:n,date:t,descOrder:!1,page:1,limit:999});c(e)}catch(e){o("Не удалось загрузить мероприятия","error")}finally{h(!1)}};return((0,a.useEffect)(()=>{j()},[t,n]),(0,a.useEffect)(()=>{let e=()=>{if(m.current){let e=m.current.getBoundingClientRect().width;e>0&&(p(e),g(!0))}};if(e(),!f){let t=setInterval(e,100);return()=>clearInterval(t)}let t=()=>{e()};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[f]),(0,a.useEffect)(()=>{s(function(e,t){let n=e.timeStart,i=e.timeEnd,a=e.idRoom;return t.some(e=>{let t=D()("".concat(e.date," ").concat(e.timeStart),"YYYY-MM-DD HH:mm:ss"),r=D()("".concat(e.date," ").concat(e.timeEnd),"YYYY-MM-DD HH:mm:ss");return a===e.meetingRoomId&&n.isBefore(r)&&i.isAfter(t)})}(r,d))},[r,d,s]),u)?(0,i.jsx)(l.A,{align:"center",children:"Загрузка..."}):(0,i.jsxs)(E.A,{ref:m,sx:{position:"relative",height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)(E.A,{sx:{position:"absolute",bottom:"40px",width:"100%",height:"4px",backgroundColor:"#333333",zIndex:0}}),(0,i.jsx)(E.A,{sx:{display:"flex",justifyContent:"space-between",position:"absolute",bottom:0,width:"100%"},children:W.map((e,t)=>(0,i.jsx)(l.A,{variant:"caption",children:e},t))}),(0,i.jsx)(E.A,{sx:{display:"flex",justifyContent:"space-between",position:"absolute",bottom:0,width:"calc(100% - 10px * 2)",top:"58.5px",zIndex:10},children:W.map((e,t)=>(0,i.jsx)(E.A,{sx:{width:"4px",height:"14px",backgroundColor:"#333333"}},t))}),(0,i.jsxs)(E.A,{sx:{display:"flex",gap:1,alignItems:"center",justifyContent:"flex-end",width:"100%"},children:[(0,i.jsx)(E.A,{sx:{width:"10px",height:"10px",backgroundColor:"rgba(149, 50, 255, 0.7)"}}),(0,i.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Ваше мероприятие"})]}),f&&d.filter(e=>{let t=parseInt(e.timeStart.slice(0,2)),n=parseInt(e.timeEnd.slice(0,2));return t>=6&&n<=22}).map((e,t)=>{let{left:n,width:a}=R(e.timeStart,e.timeEnd,x),r=t%O.length;return(0,i.jsx)(Y.A,{title:(0,i.jsxs)(E.A,{children:[(0,i.jsx)(l.A,{variant:"body2",children:e.name}),(0,i.jsx)(l.A,{variant:"body2",children:"".concat(e.timeStart.slice(0,5)," - ").concat(e.timeEnd.slice(0,5))})]}),arrow:!0,children:(0,i.jsx)(E.A,{sx:{position:"absolute",left:n,width:a,height:"20px",backgroundColor:"".concat(O[r]),bottom:"calc(50% - 10px)",transition:"height 0.2s ease-in-out",zIndex:1,"&:hover":{height:"25px"}}},"".concat(e.id,"-").concat(e.date))},"".concat(e.id,"-").concat(e.date))}),f&&(0,i.jsx)(Y.A,{title:(0,i.jsxs)(E.A,{children:[(0,i.jsx)(l.A,{variant:"body2",children:"Текущее мероприятие"}),(0,i.jsx)(l.A,{variant:"body2",children:"".concat(r.timeStart.format("HH:mm")," - ").concat(r.timeEnd.format("HH:mm"))})]}),arrow:!0,children:(0,i.jsx)(E.A,{sx:{position:"absolute",left:"".concat(R(r.timeStart.format("HH:mm:ss"),r.timeEnd.format("HH:mm:ss"),x).left,"px"),width:"".concat(R(r.timeStart.format("HH:mm:ss"),r.timeEnd.format("HH:mm:ss"),x).width,"px"),height:"20px",backgroundColor:"rgba(149, 50, 255, 0.7)",bottom:"calc(50% - 10px)",transition:"height 0.2s ease-in-out",zIndex:1,"&:hover":{height:"25px"}}})})]})};var P=n(9596),V=n(8532),L=n(4008),F=n(8539),Z=n(7866),z=n(3034),_=n(405),q=n(8523);let B=e=>{let{open:t,onClose:n,onSave:r,initialSettings:o}=e,[h,p]=(0,a.useState)("day"),[m,f]=(0,a.useState)(1),[g,A]=(0,a.useState)(D()());(0,a.useEffect)(()=>{if(o)p(o.repeatType),f(o.frequency),A(D()(o.endDate));else if(t){let e={repeatType:"day",frequency:1,endDate:D()().format("YYYY-MM-DD")};p(e.repeatType),f(e.frequency),A(D()(e.endDate)),r(e)}},[o,t,r]);let y=g?{repeatType:h,frequency:m,endDate:g.format("YYYY-MM-DD")}:null;return(0,i.jsxs)(s.A,{open:t,onClose:n,maxWidth:"xs",fullWidth:!0,children:[(0,i.jsx)(Z.A,{children:"Настройка повтора"}),(0,i.jsxs)(z.A,{children:[(0,i.jsxs)(d.A,{fullWidth:!0,sx:{mt:2},children:[(0,i.jsx)(_.A,{children:"Тип повтора"}),(0,i.jsxs)(c.A,{value:h,onChange:e=>{let t=e.target.value;p(t),g&&r({repeatType:t,frequency:m,endDate:g.format("YYYY-MM-DD")})},label:"Тип повтора",children:[(0,i.jsx)(u.A,{value:"day",children:"День"}),(0,i.jsx)(u.A,{value:"week",children:"Неделя"}),(0,i.jsx)(u.A,{value:"month",children:"Месяц"}),(0,i.jsx)(u.A,{value:"year",children:"Год"})]})]}),(0,i.jsx)(x.A,{label:"Частота повтора",type:"number",value:m,onChange:e=>{let t=parseInt(e.target.value,10);!isNaN(t)&&t>0&&(f(t),g&&r({repeatType:h,frequency:t,endDate:g.format("YYYY-MM-DD")}))},fullWidth:!0,sx:{mt:2,mb:2},inputProps:{min:1}}),(0,i.jsx)(v.$,{dateAdapter:b.R,adapterLocale:"ru",children:(0,i.jsx)(C.l,{label:"Дата окончания",value:g,minDate:D()(),sx:{mt:2},onChange:e=>{A(e),e&&r({repeatType:h,frequency:m,endDate:e.format("YYYY-MM-DD")})},slots:{textField:x.A},slotProps:{textField:{variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"0px"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"0px"}}}}})}),y&&(0,i.jsx)(l.A,{sx:{mt:2},children:"Повтор: каждый(ую) ".concat(y.frequency," ").concat({day:"день",week:"неделю",month:"месяц",year:"год"}[y.repeatType],", до ").concat(y.endDate)})]}),(0,i.jsx)(q.A,{children:(0,i.jsx)(j.A,{onClick:n,color:"primary",children:"Закрыть"})})]})},G=e=>{let{open:t,onClose:n,mode:S,event:E,idEvent:Y}=e,R=(0,r.A)("(max-width:600px)"),[O,W]=(0,a.useState)(null),[Z,z]=(0,a.useState)(""),[_,q]=(0,a.useState)(""),[G,$]=(0,a.useState)(),[J,U]=(0,a.useState)(null),[X,K]=(0,a.useState)([]),[Q,ee]=(0,a.useState)(D()()),[et,en]=(0,a.useState)(Q),[ei,ea]=(0,a.useState)(D()().set("hour",6).set("minute",0).set("second",0)),[er,es]=(0,a.useState)(D()().set("hour",6).set("minute",30).set("second",0)),[el,eo]=(0,a.useState)(0),[ed,ec]=(0,a.useState)(0),[eu,eh]=(0,a.useState)(!1),[ex,ep]=(0,a.useState)(!1),[em,ef]=(0,a.useState)("public"),[eg,ej]=(0,a.useState)(!1),[eA,ey]=(0,a.useState)([]),[ev,eb]=(0,a.useState)([]),[eC,ew]=(0,a.useState)(!0),[eS,eD]=(0,a.useState)([]),{showNotification:eI}=(0,H.h)(),[eM,eT]=(0,a.useState)(!1),{user:eE}=(0,F.A)(),eY=X.length>ed,[ek,eH]=(0,a.useState)(!1),[eR,eO]=(0,a.useState)(null),[eW,eN]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{ew(!0);let[e,t]=await Promise.all([(0,P.C)(),(0,L.S)()]);ey(e),eD(t);let n=()=>{let t=localStorage.getItem("default_office_id");return t?Number(t):e[0].id};e.length>0&&($(n()),eo(e.find(e=>e.id==n()).timeZone));let i=await (0,V.g)({officeId:n()});eb(i.data),i.data.length>0&&(U(i.data[0].id),ec(i.data[0].size))}catch(e){eI("Ошибка загрузки данных","error")}finally{ew(!1)}})()},[]),(0,a.useEffect)(()=>{if("edit"===S&&E){z(E.name),q(E.description),U(E.meetingRoomId),ee(D()(E.date)),ea(D()("".concat(E.date," ").concat(E.timeStart))),es(D()("".concat(E.date," ").concat(E.timeEnd))),E.recurrenceType&&(eH(!0),eO({repeatType:E.recurrenceType,frequency:E.recurrenceInterval,endDate:E.recurrenceEnd})),K(eS.filter(e=>E.employeeIds.includes(e.id)));let e=ev.find(e=>e.id===E.meetingRoomId);e&&(ec(e.size),ef(e.isPublic?"public":"private"),$(e.office.id),eo(e.office.timeZone))}},[S,E,eS,ev]),(0,a.useEffect)(()=>{ei&&er?ej(ei.isAfter(er)):ej(!1);let e=e=>!!e&&(6>e.hour()||e.hour()>=22);ei&&er?ej(ei.isAfter(er)||e(ei)||e(er)):ej(!1)},[ei,er]);let eP=async e=>{let t=Number(e.target.value);$(t);let n=eA.find(e=>e.id===t);n&&eo(n.timeZone);try{ew(!0);let e=await (0,V.g)({officeId:t});eb(e.data),e.data.length>0?(U(e.data[0].id),ec(e.data[0].size)):(U(null),ec(0))}catch(e){eI("Ошибка загрузки комнат","error")}finally{ew(!1)}},eV=e=>{K(t=>t.filter(t=>t.id!==e.id))},eL=()=>{W(null),z(""),q(""),K([]),ee(D()()),en(D()()),ea(D()().set("hour",6).set("minute",0).set("second",0)),es(D()().set("hour",6).set("minute",30).set("second",0)),eo(0),ec(0),eh(!1),ep(!1),eO(null),eH(!1)},eF=()=>{eL(),n()},eZ=async()=>{if(!Z||!J||!Q||!ei||!er){eI("Заполните все поля","error");return}if(Q&&Q.isBefore(D()(),"day")){eI("Дата не может быть раньше сегодняшнего дня","error");return}if(eY){eI("Комната переполнена","error");return}if(eg){eI("Время начала не может быть позже времени окончания","error");return}let e={name:Z,description:_,date:Q.format("YYYY-MM-DD"),timeStart:ei.format("HH:mm:ss"),timeEnd:er.format("HH:mm:ss"),authorId:eE.id,meetingRoomId:J,employeeIds:X.map(e=>e.id),recurrenceType:null==eR?void 0:eR.repeatType,recurrenceInterval:null==eR?void 0:eR.frequency,recurrenceEnd:null==eR?void 0:eR.endDate};try{"create"===S?(await (0,k.lh)(e),eI("Мероприятие успешно создано","success")):"edit"===S&&Y&&(await (0,k.qM)(Y,e),eI("Мероприятие успешно обновлено","success")),eL(),n()}catch(e){eI("Произошла ошибка при сохранении мероприятия","error")}finally{eL(),n()}};return(0,i.jsx)(I.A,{theme:T.A,children:(0,i.jsx)(s.A,{open:t,scroll:"paper",slotProps:{paper:{className:"dialog-container",sx:{margin:R?"0":"32px",height:R?"100%":"calc(100% - 60px * 2)"}}},children:(0,i.jsxs)("div",{className:"event-form-content",children:[(0,i.jsxs)("div",{className:"event-form-title-container",children:[(0,i.jsxs)("div",{className:"event-form-title-container-main",children:[(0,i.jsxs)("div",{className:"event-form-title",style:{display:"create"===S?"flex":"none"},children:[(0,i.jsx)("img",{src:"/images/add-event.svg",alt:""}),(0,i.jsx)(l.A,{variant:"h5",children:"Новое мероприятие"})]}),(0,i.jsxs)("div",{className:"event-form-title",style:{display:"edit"===S?"flex":"none"},children:[(0,i.jsx)("img",{src:"/images/edit-event.svg",alt:""}),(0,i.jsx)(l.A,{variant:"h5",children:"Редактировать мероприятие"})]}),(0,i.jsx)("img",{src:"/images/cross.svg",alt:"",style:{cursor:"pointer"},onClick:eF})]}),(0,i.jsxs)("div",{className:"event-form-info",children:[(0,i.jsxs)("div",{className:"event-form-info-item",children:[(0,i.jsx)("img",{src:"/images/time.svg",alt:""}),(0,i.jsxs)(l.A,{children:["UTC ",el>=0?"+"+el:el,":00"]})]}),(0,i.jsxs)("div",{className:"event-form-info-item",children:[(0,i.jsx)("img",{src:"/images/people.svg",alt:""}),(0,i.jsxs)(l.A,{children:[ed," человек"]})]})]})]}),(0,i.jsx)("div",{className:"event-form-scroll-box",children:(0,i.jsxs)("div",{className:"event-form-fields",children:[(0,i.jsxs)(M.A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,i.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Название"}),(0,i.jsx)(o.A,{value:Z,onChange:e=>z(e.target.value),fullWidth:!0,placeholder:"Название мероприятия",sx:{borderRadius:"0px",height:"50px"}})]}),(0,i.jsxs)(M.A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,i.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Описание"}),(0,i.jsx)(o.A,{multiline:!0,rows:3.5,value:_,onChange:e=>q(e.target.value),fullWidth:!0,placeholder:"Описание мероприятия",sx:{borderRadius:"0px",height:"100px"}})]}),(0,i.jsxs)(M.A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,i.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Офис"}),(0,i.jsx)(d.A,{fullWidth:!0,children:(0,i.jsx)(c.A,{value:G,onChange:eP,displayEmpty:!0,variant:"outlined",sx:{borderRadius:"0px",height:"50px"},children:eA.map(e=>(0,i.jsx)(u.A,{value:e.id,children:e.name},e.id))})})]}),(0,i.jsx)(M.A,{sx:{display:"flex",gap:3},children:(0,i.jsxs)(M.A,{sx:{display:"flex",flexDirection:"column",gap:.5,flex:6},children:[(0,i.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Комната"}),(0,i.jsx)(d.A,{fullWidth:!0,children:(0,i.jsx)(c.A,{value:eC?0:J,onChange:e=>{let t=Number(e.target.value);U(t);let n=ev.find(e=>e.id===t);n&&(ec(n.size),K(n.employees),ep(n.employees.length>0))},displayEmpty:!0,variant:"outlined",sx:{borderRadius:"0px",height:"50px"},children:eC?(0,i.jsx)(u.A,{value:0,children:"Загрузка..."}):ev.map(e=>(0,i.jsx)(u.A,{value:e.id,children:e.name},e.id))})})]})}),(0,i.jsxs)(M.A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,i.jsxs)(M.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Участники"}),eY&&(0,i.jsx)(l.A,{color:"error",children:"Комната переполнена"})]}),(0,i.jsx)(d.A,{fullWidth:!0,children:(0,i.jsx)(h.A,{multiple:!0,options:eS,getOptionLabel:e=>e.fullName,value:X,disabled:ex,onChange:(e,t)=>{K(t)},noOptionsText:"Не найдено",renderInput:e=>(0,i.jsx)(x.A,{...e,placeholder:"Фио сотрудника",sx:{"& .MuiOutlinedInput-root":{borderRadius:"0px",minHeight:"50px",padding:"4px 8px",...eY&&{borderColor:"error.main","& .MuiOutlinedInput-notchedOutline":{borderColor:"error.main"}}},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"0px"}}}),renderTags:e=>(0,i.jsx)(M.A,{sx:{display:"flex",flexWrap:"wrap",gap:.75},children:e.map(e=>(0,i.jsx)(p.A,{label:e.fullName,disabled:ex,onDelete:()=>eV(e),onMouseDown:e=>e.stopPropagation(),sx:{borderRadius:"0px",height:"30px"}},e.id))}),isOptionEqualToValue:(e,t)=>e.id===t.id,PopperComponent:e=>(0,i.jsx)(m.A,{...e,sx:{maxHeight:"200px",overflowY:"auto"}})})})]}),(0,i.jsxs)(M.A,{sx:{display:"flex",gap:3,justifyContent:"space-between",alignItems:"end"},children:[(0,i.jsxs)(M.A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,i.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Дата начала"}),(0,i.jsx)(v.$,{dateAdapter:b.R,adapterLocale:"ru",children:(0,i.jsx)(C.l,{value:Q,onChange:e=>ee(e),minDate:D()(),slots:{textField:x.A},slotProps:{textField:{variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"0px",height:"50px"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"0px"}}}}})})]}),(0,i.jsxs)(M.A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,i.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Время начала"}),(0,i.jsx)(v.$,{dateAdapter:b.R,adapterLocale:"ru",children:(0,i.jsx)(w.A,{value:ei,onChange:e=>ea(e),minTime:D()().set("hour",6).set("minute",0),maxTime:D()().set("hour",22).set("minute",0),skipDisabled:!0,shouldDisableTime:(e,t)=>{let n=e.hour();return n<6||n>22},slots:{textField:x.A},slotProps:{textField:{variant:"outlined",error:eg,sx:{"& .MuiOutlinedInput-root":{borderRadius:"0px",height:"50px"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"0px"}}}}})})]}),(0,i.jsxs)(M.A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,i.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Время окончания"}),(0,i.jsx)(v.$,{dateAdapter:b.R,adapterLocale:"ru",children:(0,i.jsx)(w.A,{value:er,onChange:e=>es(e),minTime:D()().set("hour",6).set("minute",0),maxTime:D()().set("hour",22).set("minute",0),skipDisabled:!0,shouldDisableTime:(e,t)=>{let n=e.hour();return n<6||n>22},slots:{textField:x.A},slotProps:{textField:{variant:"outlined",error:eg,sx:{"& .MuiOutlinedInput-root":{borderRadius:"0px",height:"50px"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"0px"}}}}})})]}),(0,i.jsxs)(M.A,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsxs)(M.A,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(f.A,{checked:ek,onClick:()=>{if(ek){eH(!1);return}eH(!0),eN(!0)}}),(0,i.jsxs)(M.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Повторять"}),(0,i.jsx)(l.A,{variant:"body1",color:"primary",onClick:()=>eN(!0),sx:{display:ek?"block":"none",cursor:"pointer"},children:"Изменить"})]})]}),(0,i.jsx)(B,{open:eW,onClose:()=>{eN(!1)},onSave:e=>{eO(e)},initialSettings:eR})]})]}),(0,i.jsxs)(M.A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,i.jsxs)(M.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Занятость комнаты"}),eM&&(0,i.jsx)(l.A,{color:"error",children:"Событие пересекается с существующими"})]}),(0,i.jsxs)(M.A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,i.jsxs)(M.A,{sx:{display:"flex",gap:1.5,height:"40px",border:"#A3A3A3 1px solid",alignItems:"center",justifyContent:"center"},children:[(0,i.jsx)(g.A,{color:"secondary",sx:{backgroundColor:"#eee",padding:"4px"},onClick:()=>en(et.add(-1,"day")),children:(0,i.jsx)(A.A,{fontSize:"small"})}),(0,i.jsx)(v.$,{dateAdapter:b.R,adapterLocale:"ru",children:(0,i.jsx)(C.l,{value:et,slots:{textField:x.A},format:"dddd, D MMMM",open:eu,onOpen:()=>eh(!0),onClose:()=>eh(!1),onChange:e=>{e&&en(e)},slotProps:{textField:{onClick:()=>eh(!0),InputProps:{endAdornment:null,readOnly:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"0px",border:"none"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"0px",border:"none"},"& .MuiInputBase-input":{cursor:"pointer",userSelect:"none"}}}}})}),(0,i.jsx)(g.A,{color:"secondary",sx:{backgroundColor:"#eee",padding:"4px"},onClick:()=>en(et.add(1,"day")),children:(0,i.jsx)(y.A,{fontSize:"small"})})]}),(0,i.jsx)(M.A,{sx:{display:"flex",height:"150px",border:"#A3A3A3 1px solid",padding:"20px",background:"#F4F4F4"},children:(0,i.jsx)(N,{date:et.format("YYYY-MM-DD"),roomId:J,currentEvent:{id:O,date:Q,timeStart:ei,timeEnd:er,idRoom:J},onOverlapCheck:e=>{eT(e)}})})]})]}),(0,i.jsxs)(M.A,{sx:{display:"flex",gap:2.5},children:[(0,i.jsxs)(j.A,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{height:"50px"},onClick:eF,children:[(0,i.jsx)("img",{src:"/images/cancel-icon.svg",alt:"icon",style:{marginRight:10}}),"Отменить"]}),(0,i.jsxs)(j.A,{variant:"contained",color:"primary",fullWidth:!0,sx:{height:"50px",display:"edit"===S?"flex":"none"},onClick:eZ,children:[(0,i.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"currentColor",style:{marginRight:10},children:(0,i.jsx)("path",{d:"M18 4.5V16.5C18 17.05 17.8042 17.5208 17.4125 17.9125C17.0208 18.3042 16.55 18.5 16 18.5H2C1.45 18.5 0.979167 18.3042 0.5875 17.9125C0.195833 17.5208 0 17.05 0 16.5V2.5C0 1.95 0.195833 1.47917 0.5875 1.0875C0.979167 0.695833 1.45 0.5 2 0.5H14L18 4.5ZM16 5.35L13.15 2.5H2V16.5H16V5.35ZM9 15.5C9.83333 15.5 10.5417 15.2083 11.125 14.625C11.7083 14.0417 12 13.3333 12 12.5C12 11.6667 11.7083 10.9583 11.125 10.375C10.5417 9.79167 9.83333 9.5 9 9.5C8.16667 9.5 7.45833 9.79167 6.875 10.375C6.29167 10.9583 6 11.6667 6 12.5C6 13.3333 6.29167 14.0417 6.875 14.625C7.45833 15.2083 8.16667 15.5 9 15.5ZM3 7.5H12V4.5H3V7.5ZM2 5.35V16.5V2.5V5.35Z"})}),"Сохранить"]}),(0,i.jsxs)(j.A,{variant:"contained",color:"primary",fullWidth:!0,sx:{height:"50px",display:"create"===S?"flex":"none"},onClick:eZ,children:[(0,i.jsx)("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:10},children:(0,i.jsx)("path",{d:"M9.6 14.5H11.4V10.9H15V9.1H11.4V5.5H9.6V9.1H6V10.9H9.6V14.5ZM10.5 19C9.255 19 8.085 18.7638 6.99 18.2913C5.895 17.8188 4.9425 17.1775 4.1325 16.3675C3.3225 15.5575 2.68125 14.605 2.20875 13.51C1.73625 12.415 1.5 11.245 1.5 10C1.5 8.755 1.73625 7.585 2.20875 6.49C2.68125 5.395 3.3225 4.4425 4.1325 3.6325C4.9425 2.8225 5.895 2.18125 6.99 1.70875C8.085 1.23625 9.255 1 10.5 1C11.745 1 12.915 1.23625 14.01 1.70875C15.105 2.18125 16.0575 2.8225 16.8675 3.6325C17.6775 4.4425 18.3188 5.395 18.7913 6.49C19.2638 7.585 19.5 8.755 19.5 10C19.5 11.245 19.2638 12.415 18.7913 13.51C18.3188 14.605 17.6775 15.5575 16.8675 16.3675C16.0575 17.1775 15.105 17.8188 14.01 18.2913C12.915 18.7638 11.745 19 10.5 19ZM10.5 17.2C12.51 17.2 14.2125 16.5025 15.6075 15.1075C17.0025 13.7125 17.7 12.01 17.7 10C17.7 7.99 17.0025 6.2875 15.6075 4.8925C14.2125 3.4975 12.51 2.8 10.5 2.8C8.49 2.8 6.7875 3.4975 5.3925 4.8925C3.9975 6.2875 3.3 7.99 3.3 10C3.3 12.01 3.9975 13.7125 5.3925 15.1075C6.7875 16.5025 8.49 17.2 10.5 17.2Z",fill:"white"})}),"Добавить"]})]})]})})]})})})}},8532:(e,t,n)=>{n.d(t,{H:()=>a,g:()=>i});let i=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=new URLSearchParams;e.officeId&&t.append("office_id",e.officeId.toString()),e.name&&t.append("name",e.name),void 0!==e.isActive&&t.append("is_active",e.isActive.toString()),void 0!==e.canAccess&&t.append("can_access",e.canAccess.toString()),e.page&&t.append("page",e.page.toString()),e.limit&&t.append("limit",e.limit.toString());let n="http://127.0.0.1:8000/api/meeting-room?".concat(t.toString());console.log("Запрос:",n);let i=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json",jwt:"".concat(localStorage.getItem("jwt"))}});if(!i.ok){let e=await i.text();throw Error("Ошибка: ".concat(i.status," - ").concat(e))}return await i.json()}catch(e){throw console.error("Ошибка при запросе комнат:",e),e}},a=async e=>{try{let t=await fetch("http://127.0.0.1:8000/api/meeting-room/".concat(e),{method:"GET",headers:{"Content-Type":"application/json",jwt:"".concat(localStorage.getItem("jwt"))}});if(!t.ok){let e=await t.text();throw Error("Ошибка: ".concat(t.status," - ").concat(e))}return await t.json()}catch(e){throw console.error("Ошибка при запросе комнат:",e),e}}},9596:(e,t,n)=>{n.d(t,{C:()=>i});let i=async()=>{try{let e=await fetch("http://127.0.0.1:8000/api/office",{method:"GET",headers:{"Content-Type":"application/json",jwt:"".concat(localStorage.getItem("jwt"))}});if(!e.ok)throw Error("Ошибка: ".concat(e.status));return await e.json()}catch(e){throw console.error("Ошибка при запросе офисов:",e),e}}}}]);