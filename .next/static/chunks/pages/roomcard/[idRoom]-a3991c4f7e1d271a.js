(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{45:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>P});var a=l(7876),i=l(8207),n=l(8425),d=l(7578),t=l(7018),c=l(4868),r=l(946),o=l(4348),h=l(1951),x=l(7339),m=l(6347),p=l(8107),j=l(755),u=l(7907),g=l(5939),A=l(4203),b=l(4274),v=l(4232),N=l(8490),w=l(6482),_=l(9099),f=l(8532),E=l(2597),k=l(8539),y=l(1704),C=l(3316);let P=()=>{var e;let s=(0,i.A)("(max-width:600px)"),l=(0,i.A)("(max-width:1560px)"),[P,R]=(0,v.useState)(),[S,T]=(0,v.useState)(!0),[W,O]=(0,v.useState)(null),X=(0,_.useRouter)(),{idRoom:M}=X.query,{loading:z,hasRole:L}=(0,k.A)(),{showNotification:q}=(0,C.h)(),[D,H]=(0,v.useState)(),Y=e=>{H(e)},[B,F]=(0,v.useState)(0),[G,I]=(0,v.useState)(null),[J,K]=(0,v.useState)(null),[Q,U]=(0,v.useState)(0),V=(0,v.useRef)(null),Z=()=>{var e;return(null===(e=V.current)||void 0===e?void 0:e.offsetWidth)||0},$=()=>{F(e=>e>0?e-1:P.photoPath.length-1),U(0)},ee=()=>{F(e=>e<P.photoPath.length-1?e+1:0),U(0)},es=null!==(e=null==P?void 0:P.photoPath)&&void 0!==e?e:[],[el,ea]=(0,v.useState)(0),ei=es.slice(el,el+3),en=-B*Z()+Q;return((0,v.useEffect)(()=>{(async()=>{if(M&&"string"==typeof M)try{T(!0),O(null);let e=Number(M);isNaN(e)&&X.push("/rooms");let s=await (0,f.H)(e);R(s),H(s.photoPath[0]),console.log(s)}catch(e){q("Не удалось загрузить данные комнат","error"),O("Не удалось загрузить данные комнаты")}finally{T(!1)}})()},[M]),X.isReady)?S?(0,a.jsx)(n.A,{theme:N.A,children:(0,a.jsx)(d.A,{sx:{padding:"4vh 2%"},children:(0,a.jsx)(t.A,{textAlign:"center",children:"Загрузка..."})})}):W||!P?(0,a.jsx)(n.A,{theme:N.A,children:(0,a.jsx)(d.A,{sx:{padding:"4vh 2%"},children:(0,a.jsx)(t.A,{color:"error",children:W||"Комната не найдена"})})}):(0,a.jsx)("div",{style:{width:"100%"},children:(0,a.jsx)(n.A,{theme:N.A,children:(0,a.jsxs)("div",{className:"content",children:[(0,a.jsxs)("div",{className:"title-container",children:[(0,a.jsxs)(t.A,{variant:"h5",sx:{padding:"12px 0",marginLeft:s?"50px":"0px"},children:["Переговорная комната - ",null==P?void 0:P.name]}),(0,a.jsx)(c.A,{color:"secondary",sx:{backgroundColor:"#eee"},onClick:()=>{X.push("/rooms")},children:"К списку комнат"})]}),(0,a.jsxs)("div",{className:"meeting-room__info-box",children:[(0,a.jsxs)("div",{className:"image-slider-box",children:[(0,a.jsx)("div",{className:"image-slider",ref:V,children:(0,a.jsx)("div",{className:"image-slider-items",style:{transform:"translateX(".concat(en,"px)")},onTouchStart:e=>{I(e.touches[0].clientX)},onTouchMove:e=>{if(null!==G){let s=e.touches[0].clientX,l=G-s;K(s),U(-l)}},onTouchEnd:()=>{if(null!==G&&null!==J){let e=G-J,s=Z();e>.3*s?ee():e<-(.3*s)&&$()}I(null),K(null),U(0)},children:null==P?void 0:P.photoPath.map((e,s)=>(0,a.jsx)("img",{src:e,alt:"Thumbnail ".concat(s+1)},s))})}),(0,a.jsxs)("div",{className:"image-slider-actions",children:[(0,a.jsxs)("div",{className:"image-slider-counter",children:[(0,a.jsx)(t.A,{children:B+1}),(0,a.jsx)(t.A,{children:"из"}),(0,a.jsx)(t.A,{children:null==P?void 0:P.photoPath.length})]}),(0,a.jsxs)("div",{className:"image-slider-buttons",children:[(0,a.jsx)(r.A,{color:"secondary",sx:{backgroundColor:"#eee"},onClick:$,children:(0,a.jsx)(u.A,{})}),(0,a.jsx)(r.A,{color:"secondary",sx:{backgroundColor:"#eee"},onClick:ee,children:(0,a.jsx)(g.A,{})})]})]})]}),(0,a.jsxs)("div",{className:"image-selector",children:[(0,a.jsxs)("div",{className:"image-selector__image-wrapper",children:[(0,a.jsx)("div",{className:"image-selector__image-list",children:ei.map((e,s)=>(0,a.jsx)("div",{className:"image-selector__image-item ".concat(D===e?"image-selector__image-item--active":""),onClick:()=>Y(e),children:(0,a.jsx)("img",{src:e,alt:"Thumbnail ".concat(s+1)})},s))}),es.length>3&&el>0&&(0,a.jsx)("button",{onClick:()=>{ea(e=>Math.max(e-1,0))},className:"image-selector__arrow image-selector__arrow--up",children:(0,a.jsx)(A.A,{})}),es.length>3&&el+3<es.length&&(0,a.jsx)("button",{onClick:()=>{ea(e=>Math.min(e+1,es.length-3))},className:"image-selector__arrow image-selector__arrow--down",children:(0,a.jsx)(b.A,{})})]}),(0,a.jsx)("div",{className:"image-selector__selected-image",children:(0,a.jsx)(w.P.img,{src:D,alt:"Selected image",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}},D)})]}),(0,a.jsx)("div",{className:"info-table",children:(0,a.jsx)(o.A,{component:h.A,sx:{width:"100%"},children:(0,a.jsx)(x.A,{children:(0,a.jsxs)(m.A,{children:[(0,a.jsxs)(p.A,{children:[(0,a.jsx)(j.A,{component:"th",scope:"row",sx:{fontWeight:"bold",width:"128px",backgroundColor:"#E3E3E3",padding:"0 10px"},children:(0,a.jsx)("div",{className:"table-head",children:(0,a.jsx)(t.A,{className:"table-head-text",children:"Название"})})}),(0,a.jsx)(j.A,{sx:{width:"calc(100% - 128px)",padding:"10px"},children:P.name})]}),(0,a.jsxs)(p.A,{children:[(0,a.jsx)(j.A,{component:"th",scope:"row",sx:{fontWeight:"bold",width:"128px",backgroundColor:"#E3E3E3",padding:"0 10px"},children:(0,a.jsx)("div",{className:"table-head",children:(0,a.jsx)(t.A,{className:"table-head-text",children:"Офис"})})}),(0,a.jsx)(j.A,{sx:{width:"calc(100% - 128px)",padding:"10px"},children:P.office.name})]}),(0,a.jsxs)(p.A,{children:[(0,a.jsx)(j.A,{component:"th",scope:"row",sx:{fontWeight:"bold",width:"128px",backgroundColor:"#E3E3E3",padding:"0 10px"},children:(0,a.jsx)("div",{className:"table-head",children:(0,a.jsx)(t.A,{className:"table-head-text",children:"Статус"})})}),(0,a.jsx)(j.A,{sx:{width:"calc(100% - 128px)",padding:"10px"},children:P.status})]}),(0,a.jsxs)(p.A,{children:[(0,a.jsx)(j.A,{component:"th",scope:"row",sx:{fontWeight:"bold",width:"128px",backgroundColor:"#E3E3E3",padding:"0 10px"},children:(0,a.jsx)("div",{className:"table-head",children:(0,a.jsx)(t.A,{className:"table-head-text",children:"Описание"})})}),(0,a.jsx)(j.A,{sx:{width:"calc(100% - 128px)",padding:"10px"},children:P.description})]}),(0,a.jsxs)(p.A,{children:[(0,a.jsx)(j.A,{component:"th",scope:"row",sx:{fontWeight:"bold",width:"128px",backgroundColor:"#E3E3E3",padding:"0 10px"},children:(0,a.jsx)("div",{className:"table-head",children:(0,a.jsx)(t.A,{className:"table-head-text",children:"Доступность"})})}),(0,a.jsx)(j.A,{sx:{width:"calc(100% - 128px)",padding:"10px"},children:P.isPublic?"Публичная":"Приватная"})]}),!1===P.isPublic&&(0,a.jsxs)(p.A,{children:[(0,a.jsx)(j.A,{component:"th",scope:"row",sx:{fontWeight:"bold",width:"128px",backgroundColor:"#E3E3E3",padding:"0 10px"},children:(0,a.jsx)("div",{className:"table-head",children:(0,a.jsx)(t.A,{className:"table-head-text",children:"Сотрудники"})})}),(0,a.jsx)(j.A,{sx:{width:"calc(100% - 128px)",padding:"10px"},children:P.employees.map((e,s)=>(0,a.jsxs)("span",{children:[e.fullName,s<P.employees.length-1&&(0,a.jsx)("br",{})]},e.id||s))})]}),(0,a.jsxs)(p.A,{children:[(0,a.jsx)(j.A,{component:"th",scope:"row",sx:{fontWeight:"bold",width:"128px",backgroundColor:"#E3E3E3",padding:"0 10px"},children:(0,a.jsx)("div",{className:"table-head",children:(0,a.jsx)(t.A,{className:"table-head-text",children:"Емкость"})})}),(0,a.jsx)(j.A,{sx:{width:"calc(100% - 128px)",padding:"10px"},children:P.size})]})]})})})})]}),z?(0,a.jsx)(t.A,{children:"Загрузка"}):L("ROLE_MODERATOR")?(0,a.jsx)(y.default,{disableRoomElements:!0,idRoom:Number(M),showAuthorColumn:!0}):(0,a.jsx)(E.default,{disableRoomElements:!0,idRoom:Number(M)}),(0,a.jsx)("div",{className:"title-container",style:{marginTop:"48px"},children:(0,a.jsx)(t.A,{variant:"h5",children:"Календарь занятости"})}),(0,a.jsx)("iframe",{style:{height:l?"95vh":"85vh"},className:"calandar-frame",src:"https://calendar.yandex.ru/embed/week?&layer_ids=".concat(null==P?void 0:P.calendarCode.replace("events-",""),"&tz_id=Asia/Yekaterinburg&layer_names=Комната 213")})]})})}):(0,a.jsx)(n.A,{theme:N.A,children:(0,a.jsx)(d.A,{sx:{padding:"4vh 2%"},children:(0,a.jsx)(t.A,{children:"Подготовка..."})})})}},3660:(e,s,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/roomcard/[idRoom]",function(){return l(45)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[284,487,316,473,17,144,33,608,885,482,493,597,704,636,593,792],()=>s(3660)),_N_E=e.O()}]);