(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{325:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/rooms",function(){return a(2248)}])},2248:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var n=a(7876),c=a(4232),r=a(9099),o=a(8207),i=a(8425),s=a(7578),l=a(7018),d=a(8284),h=a(6120),x=a(656),p=a(4348),u=a(1951),j=a(7339),f=a(2639),A=a(8107),m=a(755),g=a(6347),w=a(9017),y=a(968),S=a(8490),v=a(8532),C=a(9596),_=a(3316);let E=()=>{let e=(0,o.A)("(max-width:1440px)"),t=(0,o.A)("(max-width:1024px)"),a=(0,o.A)("(max-width:600px)"),[E,k]=(0,c.useState)([]),[b,I]=(0,c.useState)(0),[T,N]=(0,c.useState)([]),[P,D]=(0,c.useState)(!0),[G,z]=(0,c.useState)(null),[L,O]=(0,c.useState)(""),[R,X]=(0,c.useState)("Все"),[B,H]=(0,c.useState)("Все"),[U,q]=(0,c.useState)(()=>{let e=localStorage.getItem("default_office_id");return e?Number(e):""}),[F,J]=(0,c.useState)(1),[K]=(0,c.useState)(10),[M,Q]=(0,c.useState)(1),V=(0,r.useRouter)(),{showNotification:W}=(0,_.h)(),Y=e=>{V.push("/roomcard/".concat(e))};return(0,c.useEffect)(()=>{(async()=>{try{let e=await (0,C.C)();N(e)}catch(e){W("Не удалось загрузить офисы","error"),z("Не удалось загрузить офисы")}})()},[]),(0,c.useEffect)(()=>{(async()=>{try{D(!0);let e=await (0,v.g)({officeId:""===U?void 0:U,name:L||void 0,page:F,limit:K});k(e.data),I(e.meta.total),Q(e.meta.totalPages)}catch(e){W("Не удалось загрузить список комнат","error"),z("Не удалось загрузить список комнат")}finally{D(!1)}})()},[L,U,R,B,F,K]),(0,n.jsx)(i.A,{theme:S.A,children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:t?"94vh":"92vh"},children:[(0,n.jsxs)(s.A,{children:[(0,n.jsxs)(s.A,{sx:{display:"flex",alignItems:e?"stetch":"center",justifyContent:"space-between",marginBottom:"1em",flexDirection:e?"column":"row",gap:1},children:[(0,n.jsxs)(s.A,{sx:{display:"flex",gap:1,justifyContent:a?"flex-end":"flex-start"},children:[(0,n.jsx)(l.A,{variant:"h5",sx:{padding:"12px 0",marginLeft:a?"50px":"0px",textAlign:"end"},children:"Переговорные комнаты"}),(0,n.jsx)(l.A,{sx:{color:"#A3A3A3"},children:P?0:G?0:b})]}),(0,n.jsxs)(s.A,{sx:{display:"flex",gap:2,flexDirection:a?"column":"row"},children:[(0,n.jsx)(d.A,{variant:"outlined",placeholder:"Название комнаты",value:L,onChange:e=>O(e.target.value),sx:{width:e?"100%":"230px"}}),(0,n.jsxs)(h.A,{value:U,onChange:e=>q(e.target.value),displayEmpty:!0,sx:{width:e?"100%":"230px"},children:[(0,n.jsx)(x.A,{value:"",children:"Все офисы"}),T.map(e=>(0,n.jsx)(x.A,{value:e.id,children:e.name},e.id))]})]})]}),(0,n.jsx)(p.A,{component:u.A,children:(0,n.jsxs)(j.A,{children:[(0,n.jsx)(f.A,{color:"secondary",children:(0,n.jsxs)(A.A,{children:[(0,n.jsx)(m.A,{children:"Наименование"}),(0,n.jsx)(m.A,{children:"Офис"}),(0,n.jsx)(m.A,{children:"Занятость"}),(0,n.jsx)(m.A,{children:e?"Чел.":"Емкость, чел."})]})}),(0,n.jsx)(g.A,{children:P?(0,n.jsx)(A.A,{children:(0,n.jsx)(m.A,{colSpan:5,children:(0,n.jsx)(l.A,{align:"center",children:"Загрузка..."})})}):G?(0,n.jsx)(A.A,{children:(0,n.jsx)(m.A,{colSpan:5,children:(0,n.jsx)(l.A,{align:"center",color:"error",children:G})})}):E.map(e=>(0,n.jsxs)(A.A,{onClick:()=>Y(e.id),sx:{cursor:"pointer","&:hover":{opacity:"0.4"}},children:[(0,n.jsx)(m.A,{children:e.name}),(0,n.jsx)(m.A,{children:e.office.name}),(0,n.jsx)(m.A,{children:e.occupied?(0,n.jsx)(w.A,{label:"Занята",sx:{backgroundColor:"#fff3e0",color:"#f57c00"}}):(0,n.jsx)(w.A,{label:"Свободна",sx:{backgroundColor:"#e8f5e9",color:"#388e3c"}})}),(0,n.jsx)(m.A,{children:e.size})]},e.id))})]})})]}),M>1&&(0,n.jsx)(s.A,{sx:{mt:4,display:"flex",justifyContent:"start"},children:(0,n.jsx)(y.A,{count:M,page:F,onChange:(e,t)=>{J(t)},color:"primary",size:"medium"})})]})})}},8532:(e,t,a)=>{"use strict";a.d(t,{H:()=>c,g:()=>n});let n=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=new URLSearchParams;e.officeId&&t.append("office_id",e.officeId.toString()),e.name&&t.append("name",e.name),void 0!==e.isActive&&t.append("is_active",e.isActive.toString()),void 0!==e.canAccess&&t.append("can_access",e.canAccess.toString()),e.page&&t.append("page",e.page.toString()),e.limit&&t.append("limit",e.limit.toString());let a="http://127.0.0.1:8000/api/meeting-room?".concat(t.toString());console.log("Запрос:",a);let n=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json",jwt:"".concat(localStorage.getItem("jwt"))}});if(!n.ok){let e=await n.text();throw Error("Ошибка: ".concat(n.status," - ").concat(e))}return await n.json()}catch(e){throw console.error("Ошибка при запросе комнат:",e),e}},c=async e=>{try{let t=await fetch("http://127.0.0.1:8000/api/meeting-room/".concat(e),{method:"GET",headers:{"Content-Type":"application/json",jwt:"".concat(localStorage.getItem("jwt"))}});if(!t.ok){let e=await t.text();throw Error("Ошибка: ".concat(t.status," - ").concat(e))}return await t.json()}catch(e){throw console.error("Ошибка при запросе комнат:",e),e}}},9596:(e,t,a)=>{"use strict";a.d(t,{C:()=>n});let n=async()=>{try{let e=await fetch("http://127.0.0.1:8000/api/office",{method:"GET",headers:{"Content-Type":"application/json",jwt:"".concat(localStorage.getItem("jwt"))}});if(!e.ok)throw Error("Ошибка: ".concat(e.status));return await e.json()}catch(e){throw console.error("Ошибка при запросе офисов:",e),e}}}},e=>{var t=t=>e(e.s=t);e.O(0,[284,473,17,636,593,792],()=>t(325)),_N_E=e.O()}]);