exports.id=386,exports.ids=[386],exports.modules={6273:(e,t,r)=>{"use strict";function i({userId:e}){return null}r.d(t,{A:()=>i}),r(82015),r(71167)},16672:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});let i=e=>{}},35819:(e,t,r)=>{"use strict";r.a(e,async(e,i)=>{try{r.d(t,{h:()=>p,p:()=>c});var n=r(8732),o=r(82015),s=r(73543),a=r(77855),l=r(16672),d=e([s,a]);[s,a]=d.then?(await d)():d;let h=(0,o.createContext)(void 0),c=({children:e})=>{let[t,r]=(0,o.useState)({open:!1,message:"",severity:"info"}),i=(e,t="info")=>{r({open:!0,message:e,severity:t})};(0,o.useEffect)(()=>{(0,l.g)({showNotification:i})},[]);let d=()=>{r(e=>({...e,open:!1}))};return(0,n.jsxs)(h.Provider,{value:{showNotification:i},children:[e,(0,n.jsx)(s.A,{open:t.open,autoHideDuration:6e3,onClose:d,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,n.jsx)(a.A,{onClose:d,severity:t.severity,sx:{width:"100%"},children:t.message})})]})},p=()=>{let e=(0,o.useContext)(h);if(!e)throw Error("useNotification must be used within NotificationProvider");return e};i()}catch(e){i(e)}})},44133:()=>{},44483:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(67798).createTheme)({palette:{primary:{main:"#603F99"},secondary:{main:"#A3A3A3"}},typography:{fontFamily:"Mont, sans-serif"},components:{MuiButton:{styleOverrides:{root:{fontSize:"14px",padding:"15px 15px",boxShadow:"none",borderRadius:"0"}}},MuiOutlinedInput:{styleOverrides:{root:{borderRadius:"0"}}},MuiTab:{styleOverrides:{root:{textTransform:"none"}}},MuiTable:{styleOverrides:{root:{borderCollapse:"collapse",width:"100%"}}},MuiPaper:{styleOverrides:{root:{boxShadow:"none",borderRadius:"0"}}},MuiTableCell:{styleOverrides:{head:{backgroundColor:"#E3E3E3",color:"#858585",padding:"12px 16px"},body:{color:"#333",padding:"12px 16px",borderBottom:"none"}}},MuiTableRow:{styleOverrides:{root:{"&:nth-of-type(odd)":{backgroundColor:"#F4F4F4"}}}},MuiPopper:{styleOverrides:{root:{"& .MuiPaper-root":{border:"2px solid #603F99",borderRadius:"4px"}}}},MuiPopover:{styleOverrides:{paper:{border:"2px solid #603F99",borderRadius:"4px"}}}}})},48778:(e,t,r)=>{"use strict";r.d(t,{H:()=>n,i:()=>i});let i=async e=>{let t=await fetch("http://127.0.0.1:8000/api/login_check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Неверные данные");let r=(await t.json()).token;if(!r)throw Error("Токен не получен");return r},n=async()=>{let e=localStorage.getItem("jwt");if(!e)return null;let t=await fetch("http://127.0.0.1:8000/api/employee/self",{method:"GET",headers:{"Content-Type":"application/json",jwt:`${e}`}});if(!t.ok)throw Error("Ошибка получения данных пользователя");return t.json()}},63212:(e,t,r)=>{"use strict";r.a(e,async(e,i)=>{try{r.d(t,{A:()=>p,O:()=>c});var n=r(8732),o=r(82015),s=r(48778),a=r(44233),l=r(35819),d=e([l]);l=(d.then?(await d)():d)[0];let h=(0,o.createContext)(void 0),c=({children:e})=>{let[t,r]=(0,o.useState)(null),[i,d]=(0,o.useState)(!0),c=(0,a.useRouter)(),{showNotification:p}=(0,l.h)();(0,o.useEffect)(()=>{(async()=>{try{let e=await (0,s.H)();r(e)}catch(e){p(e instanceof Error?e.message:"Ошибка инициализации авторизации","error"),r(null)}finally{d(!1)}})()},[p]);let u=async e=>{localStorage.setItem("jwt",e);try{let e=await (0,s.H)();r(e)}catch(e){p(e instanceof Error?e.message:"Ошибка после логина","error"),r(null)}};return(0,n.jsx)(h.Provider,{value:{user:t,login:u,logout:()=>{localStorage.removeItem("jwt"),r(null),c.push("/auth")},loading:i,updateUser:e=>{r(t=>t?{...t,...e}:null)},hasRole:e=>t?.roles?.includes(e)||!1},children:e})},p=()=>{let e=(0,o.useContext)(h);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};i()}catch(e){i(e)}})},71167:(e,t,r)=>{"use strict";async function i(){if("serviceWorker"in navigator&&"PushManager"in window){let e=await navigator.serviceWorker.register("/sw.js");return console.log("Service Worker registered"),e}throw Error("Push notifications not supported")}async function n(e,t){return await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){let t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/-/g,"+").replace(/_/g,"/"),i=window.atob(r),n=new Uint8Array(i.length);for(let e=0;e<i.length;++e)n[e]=i.charCodeAt(e);return n}(t)})}async function o(e,t){let r=await fetch("http://127.0.0.1:8000/api/push-subscribe",{method:"POST",headers:{"Content-Type":"application/json",jwt:`${localStorage.getItem("jwt")}`},body:JSON.stringify({...e.toJSON(),userId:t})});return localStorage.setItem("pushEnabled",JSON.stringify(!0)),r.json()}async function s(e){await fetch("http://127.0.0.1:8000/api/push-unsubscribe",{method:"POST",headers:{"Content-Type":"application/json",jwt:`${localStorage.getItem("jwt")}`},body:JSON.stringify({endpoint:e.endpoint})})}r.d(t,{Lz:()=>i,dJ:()=>s,eG:()=>o,sO:()=>n})},72386:(e,t,r)=>{"use strict";r.a(e,async(e,i)=>{try{r.r(t),r.d(t,{default:()=>v});var n=r(8732),o=r(81744),s=r(6273);r(73959),r(44133),r(88434);var a=r(28062),l=r(74257),d=r(63212),h=r(35819),c=r(44483),p=r(44233),u=r(82015),x=e([o,d,h]);[o,d,h]=x.then?(await x)():x;let m=({Component:e,pageProps:t})=>{let r=(0,a.A)("(max-width:1024px)"),i=(0,a.A)("(max-width:600px)"),{user:h,loading:x}=(0,d.A)(),v=(0,p.useRouter)();if((0,u.useEffect)(()=>{if(!x){let e="/auth"===v.pathname;h||e?h&&e&&v.push("/events"):v.push("/auth")}},[h,x,v]),x)return(0,n.jsx)(l.A,{theme:c.A,children:(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,n.jsx)("span",{children:"Загрузка..."})})});let m="/auth"===v.pathname;return!h&&!m||h&&m?null:(0,n.jsxs)(l.A,{theme:c.A,children:[h&&(0,n.jsx)(s.A,{userId:h.id}),(0,n.jsxs)("div",{style:{display:"flex",width:"96%",padding:r?i?"2vh 2%":"3vh 2%":"4vh 2%",overflow:"hidden"},children:[(0,n.jsx)(o.A,{}),(0,n.jsx)("div",{style:{width:"100%",overflowY:"auto",marginLeft:r?i?"0px":"65px":"305px"},children:(0,n.jsx)(e,{...t})})]})]})};function v(e){return(0,n.jsx)(h.p,{children:(0,n.jsx)(d.O,{children:(0,n.jsx)(m,{...e})})})}i()}catch(e){i(e)}})},73959:()=>{},81744:(e,t,r)=>{"use strict";r.a(e,async(e,i)=>{try{r.d(t,{A:()=>j});var n=r(8732),o=r(82015),s=r(28062),a=r(74257),l=r(87194),d=r(25867),h=r(92141),c=r(32391),p=r(2801),u=r(66149),x=r(21087),v=r(16220),m=r(43634),g=r(44483),f=r(63212),y=e([f,d,h,c,p,u,x]);[f,d,h,c,p,u,x]=y.then?(await y)():y;let j=()=>{let e=(0,s.A)("(max-width:1024px)"),t=(0,s.A)("(max-width:600px)"),{user:r,logout:i,loading:y,hasRole:j}=(0,f.A)(),w=(0,v.useRouter)(),q=(0,v.usePathname)(),[T,A]=(0,o.useState)(!1),b=[{text:"Мероприятия",icon:(0,n.jsx)("svg",{width:"22",height:"22",viewBox:"0 -960 960 960",fill:"currentColor",children:(0,n.jsx)("path",{d:"M580-240q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29ZM200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Zm0-80h560v-400H200v400Zm0-480h560v-80H200v80Zm0 0v-80 80Z"})}),path:j("ROLE_MODERATOR")?"/eventsadmin":"/events"},{text:"Переговорные комнаты",icon:(0,n.jsx)("svg",{width:"22",height:"22",viewBox:"0 -960 960 960",fill:"currentColor",children:(0,n.jsx)("path",{d:"M120-120v-80h80v-640h400v40h160v600h80v80H680v-600h-80v600H120Zm160-640v560-560Zm160 320q17 0 28.5-11.5T480-480q0-17-11.5-28.5T440-520q-17 0-28.5 11.5T400-480q0 17 11.5 28.5T440-440ZM280-200h240v-560H280v560Z"})}),path:"/rooms"},{text:"Таймлайн",icon:(0,n.jsx)("svg",{width:"22",height:"22",viewBox:"0 -960 960 960",fill:"currentColor",children:(0,n.jsx)("path",{d:"M120-240q-33 0-56.5-23.5T40-320q0-33 23.5-56.5T120-400h10.5q4.5 0 9.5 2l182-182q-2-5-2-9.5V-600q0-33 23.5-56.5T400-680q33 0 56.5 23.5T480-600q0 2-2 20l102 102q5-2 9.5-2h21q4.5 0 9.5 2l142-142q-2-5-2-9.5V-640q0-33 23.5-56.5T840-720q33 0 56.5 23.5T920-640q0 33-23.5 56.5T840-560h-10.5q-4.5 0-9.5-2L678-420q2 5 2 9.5v10.5q0 33-23.5 56.5T600-320q-33 0-56.5-23.5T520-400v-10.5q0-4.5 2-9.5L420-522q-5 2-9.5 2H400q-2 0-20-2L198-340q2 5 2 9.5v10.5q0 33-23.5 56.5T120-240Z"})}),path:"/timeline"},{text:"Профиль",icon:(0,n.jsx)("svg",{width:"22",height:"22",viewBox:"0 -960 960 960",fill:"currentColor",children:(0,n.jsx)("path",{d:"M234-276q51-39 114-61.5T480-360q69 0 132 22.5T726-276q35-41 54.5-93T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 59 19.5 111t54.5 93Zm246-164q-59 0-99.5-40.5T340-580q0-59 40.5-99.5T480-720q59 0 99.5 40.5T620-580q0 59-40.5 99.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q53 0 100-15.5t86-44.5q-39-29-86-44.5T480-280q-53 0-100 15.5T294-220q39 29 86 44.5T480-160Zm0-360q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm0-60Zm0 360Z"})}),path:"/profile"}];return r?(0,n.jsx)(a.A,{theme:g.A,children:t?(0,n.jsxs)(l.A,{sx:{width:"45px",background:"#FFFFFF",border:T?"1px solid #A3A3A3":"none",marginLeft:"2%",marginTop:"2.5vh",position:"absolute",top:0,left:0,right:0,zIndex:1300},children:[(0,n.jsx)(l.A,{children:(0,n.jsx)(d.A,{onClick:()=>A(!T),sx:{p:"10px"},children:T?(0,n.jsx)(m.A,{sx:{transform:"rotate(90deg)",transition:"transform 0.3s ease-in-out"}}):(0,n.jsx)(m.A,{sx:{transition:"transform 0.3s ease-in-out"}})})}),(0,n.jsx)(l.A,{sx:{maxHeight:T?"500px":"0px",opacity:+!!T,overflow:"hidden",transition:"maxHeight 0.3s ease-in-out"},children:(0,n.jsxs)(h.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[b.map(e=>{let t=q===e.path;return(0,n.jsx)(c.A,{onClick:()=>{w.push(e.path),A(!1)},sx:{justifyContent:"flex-start",backgroundColor:t?"primary.main":"#EEEEEE",color:t?"#FFFFFF":"secondary.main",padding:"12px"},children:(0,n.jsx)(p.A,{sx:{color:"inherit",minWidth:"0px"},children:e.icon})},e.path)}),(0,n.jsx)(l.A,{onClick:i,sx:{paddingLeft:"15px",paddingTop:"12px"},children:(0,n.jsx)("img",{src:"/images/exit-icon.svg",alt:"Выйти"})})]})})]}):(0,n.jsxs)(l.A,{sx:{position:"fixed",width:e?"52px":"270px",height:"92vh",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",background:"#FFFFFF"},children:[(0,n.jsx)(h.A,{children:(0,n.jsx)(l.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:b.map(t=>{let r=q===t.path;return(0,n.jsxs)(c.A,{onClick:()=>w.push(t.path),sx:{justifyContent:"flex-start",gap:2,backgroundColor:r?"primary.main":"#EEEEEE",color:r?"#FFFFFF":"secondary.main",padding:"15px","&:hover":{background:r?"#815FB9":"secondary.main"}},children:[(0,n.jsx)(p.A,{sx:{color:"inherit",minWidth:"0px"},children:t.icon}),!e&&(0,n.jsx)(u.A,{primary:t.text})]},t.path)})})}),(0,n.jsxs)(l.A,{onClick:i,sx:{marginTop:"auto",display:"flex",gap:2,cursor:"pointer",width:"calc(100% - 15px * 2)",padding:"0 15px",justifyContent:"space-between"},children:[(0,n.jsx)(x.A,{noWrap:!0,sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:e?"none":"block"},children:`${r?.name} ${r?.surname} ${r?.patronymic}`}),(0,n.jsx)("img",{src:"/images/exit-icon.svg",alt:"Выйти"})]})]})}):null};i()}catch(e){i(e)}})},88434:()=>{}};