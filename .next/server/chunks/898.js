"use strict";exports.id=898,exports.ids=[898],exports.modules={557:(e,t,i)=>{i.d(t,{H:()=>r,g:()=>a});let a=async(e={})=>{try{let t=new URLSearchParams;e.officeId&&t.append("office_id",e.officeId.toString()),e.name&&t.append("name",e.name),void 0!==e.isActive&&t.append("is_active",e.isActive.toString()),void 0!==e.canAccess&&t.append("can_access",e.canAccess.toString()),e.page&&t.append("page",e.page.toString()),e.limit&&t.append("limit",e.limit.toString());let i=`http://127.0.0.1:8000/api/meeting-room?${t.toString()}`;console.log("Запрос:",i);let a=await fetch(i,{method:"GET",headers:{"Content-Type":"application/json",jwt:`${localStorage.getItem("jwt")}`}});if(!a.ok){let e=await a.text();throw Error(`Ошибка: ${a.status} - ${e}`)}return await a.json()}catch(e){throw console.error("Ошибка при запросе комнат:",e),e}},r=async e=>{try{let t=`http://127.0.0.1:8000/api/meeting-room/${e}`,i=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json",jwt:`${localStorage.getItem("jwt")}`}});if(!i.ok){let e=await i.text();throw Error(`Ошибка: ${i.status} - ${e}`)}return await i.json()}catch(e){throw console.error("Ошибка при запросе комнат:",e),e}}},870:(e,t,i)=>{i.d(t,{U:()=>n,w:()=>s});var a=i(76293),r=i.n(a);function n(e,t){let i=e.timeStart,a=e.timeEnd,n=e.idRoom;return t.some(e=>{let t=r()(`${e.date} ${e.timeStart}`,"YYYY-MM-DD HH:mm:ss"),s=r()(`${e.date} ${e.timeEnd}`,"YYYY-MM-DD HH:mm:ss");return n===e.meetingRoomId&&i.isBefore(s)&&a.isAfter(t)})}function s(e,t,i){let a=r()(`2024-01-01 ${e}`,"YYYY-MM-DD HH:mm:ss"),n=r()(`2024-01-01 ${t}`,"YYYY-MM-DD HH:mm:ss"),s=(i-20)/960,l=a.startOf("day").add(6,"hour"),o=a.diff(l,"minute");return{left:Math.max(o*s+10,10),width:Math.max((n.diff(l,"minute")-o)*s,0)}}},10933:(e,t,i)=>{i.d(t,{lh:()=>u,SX:()=>m,y$:()=>h,qM:()=>p});var a=i(15851),r=i(76347),n=i(7138),s=i(74184),l=i(49894),o=i(2057),d=i(9936),c=i(72193);let x={day:n.A,week:s.A,month:l.A,year:o.A},h=async(e={})=>{try{let t=new URLSearchParams;e.roomId&&t.append("room_id",e.roomId.toString()),e.name&&t.append("name",e.name),e.type&&t.append("type",e.type),e.date&&t.append("date",e.date),e.officeId&&t.append("office_id",e.officeId.toString());let i=`http://127.0.0.1:8000/api/event?${t.toString()}`;console.log("Запрос:",i);let n=await fetch(i,{method:"GET",headers:{"Content-Type":"application/json",jwt:`${localStorage.getItem("jwt")}`}});if(!n.ok){let e=await n.text();throw Error(`Ошибка: ${n.status} - ${e}`)}let s=(await n.json()).data.map(e=>{let t=new Date(`${e.date}T${e.timeStart}Z`),i=new Date(`${e.date}T${e.timeEnd}Z`),a=e=>e.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/,/g,"");return{...e,timeStart:a(t),timeEnd:a(i)}}),o=function(e){let t=new Date,i=(0,l.A)(t,24),a=[];for(let t of e){if(t.recurrenceParent)continue;a.push(t);let{recurrenceTypeValue:e,recurrenceInterval:n=1,recurrenceEnd:s}=t;if(!e||!(e in x))continue;let l=x[e],o=s?(0,r.A)(s):i,h=l((0,r.A)(t.date),n);for(;!(0,d.A)(h,o)&&!(0,d.A)(h,i);){let e={...t,id:t.id,date:(0,c.A)(h,"yyyy-MM-dd"),recurrenceParent:t,originalDate:t.date};a.push(e),h=l(h,n)}}return a}(s),h=(0,a.A)(new Date);return o.filter(t=>"true"===e.isArchived?(0,r.A)(t.date)<h:"false"!==e.isArchived||(0,r.A)(t.date)>=h).sort((t,i)=>{let a=new Date(`${t.date}T${t.timeStart}`),r=new Date(`${i.date}T${i.timeStart}`);return e.descOrder?r.getTime()-a.getTime():a.getTime()-r.getTime()})}catch(e){throw console.error("Ошибка при запросе мероприятий:",e),e}},u=async e=>{let t=await fetch("http://127.0.0.1:8000/api/event",{method:"POST",headers:{"Content-Type":"application/json",jwt:`${localStorage.getItem("jwt")}`},body:JSON.stringify(e)});if(!t.ok)throw Error(`Ошибка создания: ${t.status}`);return await t.json()},p=async(e,t)=>{let i=await fetch(`http://127.0.0.1:8000/api/event/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",jwt:`${localStorage.getItem("jwt")}`},body:JSON.stringify(t)});if(!i.ok)throw Error(`Ошибка обновления: ${i.status}`)},m=async e=>{let t=await fetch(`http://127.0.0.1:8000/api/event/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",jwt:`${localStorage.getItem("jwt")}`}});if(!t.ok)throw Error(`Ошибка удаления: ${t.status}`)}},11564:(e,t,i)=>{i.a(e,async(e,a)=>{try{i.d(t,{A:()=>h});var r=i(8732);i(82015);var n=i(19133),s=i(53847),l=i(3271),o=i(21087),d=i(87999),c=i(43169),x=e([n,s,l,o,d,c]);[n,s,l,o,d,c]=x.then?(await x)():x;let h=({open:e,onClose:t,title:i="Подтверждение",message:a="Вы уверены?",confirmText:x="Да",cancelText:h="Нет"})=>(0,r.jsxs)(n.A,{open:e,onClose:()=>t(!1),maxWidth:"sm",fullWidth:!0,children:[(0,r.jsx)(s.A,{children:i}),(0,r.jsx)(l.A,{children:(0,r.jsx)(o.A,{children:a})}),(0,r.jsxs)(d.A,{children:[(0,r.jsx)(c.A,{onClick:()=>t(!1),color:"primary",children:h}),(0,r.jsx)(c.A,{onClick:()=>t(!0),color:"primary",variant:"contained",children:x})]})]});a()}catch(e){a(e)}})},19239:(e,t,i)=>{i.d(t,{S:()=>a,Y:()=>r});let a=async()=>{let e=await fetch("http://127.0.0.1:8000/api/employee",{method:"GET",headers:{"Content-Type":"application/json",jwt:`${localStorage.getItem("jwt")}`}});if(!e.ok)throw Error(`Ошибка: ${e.status}`);return e.json()},r=async(e,t)=>{let i=localStorage.getItem("jwt");if(!(await fetch(`http://127.0.0.1:8000/api/employee/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",jwt:`${i}`},body:JSON.stringify(t)})).ok)throw Error("Ошибка обновления данных")}},34333:(e,t,i)=>{i.a(e,async(e,a)=>{try{i.d(t,{A:()=>m});var r=i(8732),n=i(82015),s=i(21087),l=i(87194),o=i(71887),d=i(10933),c=i(35819),x=i(870),h=e([c,s,o]);[c,s,o]=h.then?(await h)():h;let u=["rgba(50, 193, 255, 0.7)","rgba(50, 67, 255, 0.7)","rgba(50, 122, 255, 0.7)","rgba(42, 200, 71, 0.7)"],p=["6:00","10:00","14:00","18:00","22:00"],m=({date:e,roomId:t,currentEvent:i,onOverlapCheck:a})=>{let{showNotification:h}=(0,c.h)(),[m,f]=(0,n.useState)([]),[g,j]=(0,n.useState)(!0),[y,A]=(0,n.useState)(0),v=(0,n.useRef)(null),[w,b]=(0,n.useState)(!1),C=async()=>{try{j(!0);let i=await (0,d.y$)({roomId:t,date:e,descOrder:!1,page:1,limit:999});f(i)}catch(e){h("Не удалось загрузить мероприятия","error")}finally{j(!1)}};return((0,n.useEffect)(()=>{C()},[e,t]),(0,n.useEffect)(()=>{let e=()=>{if(v.current){let e=v.current.getBoundingClientRect().width;e>0&&(A(e),b(!0))}};if(e(),!w){let t=setInterval(e,100);return()=>clearInterval(t)}let t=()=>{e()};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[w]),(0,n.useEffect)(()=>{let e=(0,x.U)(i,m);a(e)},[i,m,a]),g)?(0,r.jsx)(s.A,{align:"center",children:"Загрузка..."}):(0,r.jsxs)(l.A,{ref:v,sx:{position:"relative",height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)(l.A,{sx:{position:"absolute",bottom:"40px",width:"100%",height:"4px",backgroundColor:"#333333",zIndex:0}}),(0,r.jsx)(l.A,{sx:{display:"flex",justifyContent:"space-between",position:"absolute",bottom:0,width:"100%"},children:p.map((e,t)=>(0,r.jsx)(s.A,{variant:"caption",children:e},t))}),(0,r.jsx)(l.A,{sx:{display:"flex",justifyContent:"space-between",position:"absolute",bottom:0,width:"calc(100% - 10px * 2)",top:"58.5px",zIndex:10},children:p.map((e,t)=>(0,r.jsx)(l.A,{sx:{width:"4px",height:"14px",backgroundColor:"#333333"}},t))}),(0,r.jsxs)(l.A,{sx:{display:"flex",gap:1,alignItems:"center",justifyContent:"flex-end",width:"100%"},children:[(0,r.jsx)(l.A,{sx:{width:"10px",height:"10px",backgroundColor:"rgba(149, 50, 255, 0.7)"}}),(0,r.jsx)(s.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Ваше мероприятие"})]}),w&&m.filter(e=>{let t=parseInt(e.timeStart.slice(0,2)),i=parseInt(e.timeEnd.slice(0,2));return t>=6&&i<=22}).map((e,t)=>{let{left:i,width:a}=(0,x.w)(e.timeStart,e.timeEnd,y),n=t%u.length;return(0,r.jsx)(o.A,{title:(0,r.jsxs)(l.A,{children:[(0,r.jsx)(s.A,{variant:"body2",children:e.name}),(0,r.jsx)(s.A,{variant:"body2",children:`${e.timeStart.slice(0,5)} - ${e.timeEnd.slice(0,5)}`})]}),arrow:!0,children:(0,r.jsx)(l.A,{sx:{position:"absolute",left:i,width:a,height:"20px",backgroundColor:`${u[n]}`,bottom:"calc(50% - 10px)",transition:"height 0.2s ease-in-out",zIndex:1,"&:hover":{height:"25px"}}},`${e.id}-${e.date}`)},`${e.id}-${e.date}`)}),w&&(0,r.jsx)(o.A,{title:(0,r.jsxs)(l.A,{children:[(0,r.jsx)(s.A,{variant:"body2",children:"Текущее мероприятие"}),(0,r.jsx)(s.A,{variant:"body2",children:`${i.timeStart.format("HH:mm")} - ${i.timeEnd.format("HH:mm")}`})]}),arrow:!0,children:(0,r.jsx)(l.A,{sx:{position:"absolute",left:`${(0,x.w)(i.timeStart.format("HH:mm:ss"),i.timeEnd.format("HH:mm:ss"),y).left}px`,width:`${(0,x.w)(i.timeStart.format("HH:mm:ss"),i.timeEnd.format("HH:mm:ss"),y).width}px`,height:"20px",backgroundColor:"rgba(149, 50, 255, 0.7)",bottom:"calc(50% - 10px)",transition:"height 0.2s ease-in-out",zIndex:1,"&:hover":{height:"25px"}}})})]})};a()}catch(e){a(e)}})},43199:(e,t,i)=>{i.a(e,async(e,a)=>{try{i.d(t,{A:()=>b});var r=i(8732),n=i(82015),s=i(19133),l=i(53847),o=i(3271),d=i(56375),c=i(88393),x=i(84329),h=i(67173),u=i(2571),p=i(21087),m=i(87999),f=i(43169),g=i(58806),j=i(76293),y=i.n(j),A=i(80004),v=i(276),w=e([s,l,o,d,c,x,h,u,p,m,f]);[s,l,o,d,c,x,h,u,p,m,f]=w.then?(await w)():w;let b=({open:e,onClose:t,onSave:i,initialSettings:a})=>{let[j,w]=(0,n.useState)("day"),[b,C]=(0,n.useState)(1),[S,D]=(0,n.useState)(y()());(0,n.useEffect)(()=>{if(a)w(a.repeatType),C(a.frequency),D(y()(a.endDate));else if(e){let e={repeatType:"day",frequency:1,endDate:y()().format("YYYY-MM-DD")};w(e.repeatType),C(e.frequency),D(y()(e.endDate)),i(e)}},[a,e,i]);let I=S?{repeatType:j,frequency:b,endDate:S.format("YYYY-MM-DD")}:null;return(0,r.jsxs)(s.A,{open:e,onClose:t,maxWidth:"xs",fullWidth:!0,children:[(0,r.jsx)(l.A,{children:"Настройка повтора"}),(0,r.jsxs)(o.A,{children:[(0,r.jsxs)(d.A,{fullWidth:!0,sx:{mt:2},children:[(0,r.jsx)(c.A,{children:"Тип повтора"}),(0,r.jsxs)(x.A,{value:j,onChange:e=>{let t=e.target.value;w(t),S&&i({repeatType:t,frequency:b,endDate:S.format("YYYY-MM-DD")})},label:"Тип повтора",children:[(0,r.jsx)(h.A,{value:"day",children:"День"}),(0,r.jsx)(h.A,{value:"week",children:"Неделя"}),(0,r.jsx)(h.A,{value:"month",children:"Месяц"}),(0,r.jsx)(h.A,{value:"year",children:"Год"})]})]}),(0,r.jsx)(u.A,{label:"Частота повтора",type:"number",value:b,onChange:e=>{let t=parseInt(e.target.value,10);!isNaN(t)&&t>0&&(C(t),S&&i({repeatType:j,frequency:t,endDate:S.format("YYYY-MM-DD")}))},fullWidth:!0,sx:{mt:2,mb:2},inputProps:{min:1}}),(0,r.jsx)(A.LocalizationProvider,{dateAdapter:v.AdapterDayjs,adapterLocale:"ru",children:(0,r.jsx)(g.DatePicker,{label:"Дата окончания",value:S,minDate:y()(),sx:{mt:2},onChange:e=>{D(e),e&&i({repeatType:j,frequency:b,endDate:e.format("YYYY-MM-DD")})},slots:{textField:u.A},slotProps:{textField:{variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"0px"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"0px"}}}}})}),I&&(0,r.jsx)(p.A,{sx:{mt:2},children:`Повтор: каждый(ую) ${I.frequency} ${{day:"день",week:"неделю",month:"месяц",year:"год"}[I.repeatType]}, до ${I.endDate}`})]}),(0,r.jsx)(m.A,{children:(0,r.jsx)(f.A,{onClick:t,color:"primary",children:"Закрыть"})})]})};a()}catch(e){a(e)}})},47286:(e,t,i)=>{i.a(e,async(e,a)=>{try{i.d(t,{A:()=>W});var r=i(8732),n=i(82015),s=i(28062),l=i(19133),o=i(21087),d=i(97339),c=i(56375),x=i(84329),h=i(67173),u=i(89309),p=i(2571),m=i(29153),f=i(6872),g=i(75023),j=i(25867),y=i(43169),A=i(40904),v=i(88800),w=i(80004),b=i(276),C=i(58806),S=i(47779),D=i(76293),I=i.n(D);i(95236);var $=i(66099),M=i(44483),T=i(34333),Y=i(87111),E=i(557),k=i(19239),H=i(10933),O=i(35819),P=i(63212),R=i(43199),B=e([T,O,P,R,l,o,d,c,x,h,u,p,m,g,j,y]);[T,O,P,R,l,o,d,c,x,h,u,p,m,g,j,y]=B.then?(await B)():B;let W=({open:e,onClose:t,mode:i,event:a,idEvent:D})=>{let B=(0,s.A)("(max-width:600px)"),[W,N]=(0,n.useState)(null),[L,z]=(0,n.useState)(""),[V,F]=(0,n.useState)(""),[Z,q]=(0,n.useState)(),[G,_]=(0,n.useState)(null),[U,J]=(0,n.useState)([]),[X,K]=(0,n.useState)(I()()),[Q,ee]=(0,n.useState)(X),[et,ei]=(0,n.useState)(I()().set("hour",6).set("minute",0).set("second",0)),[ea,er]=(0,n.useState)(I()().set("hour",6).set("minute",30).set("second",0)),[en,es]=(0,n.useState)(0),[el,eo]=(0,n.useState)(0),[ed,ec]=(0,n.useState)(!1),[ex,eh]=(0,n.useState)(!1),[eu,ep]=(0,n.useState)("public"),[em,ef]=(0,n.useState)(!1),[eg,ej]=(0,n.useState)([]),[ey,eA]=(0,n.useState)([]),[ev,ew]=(0,n.useState)(!0),[eb,eC]=(0,n.useState)([]),{showNotification:eS}=(0,O.h)(),[eD,eI]=(0,n.useState)(!1),{user:e$}=(0,P.A)(),eM=U.length>el,[eT,eY]=(0,n.useState)(!1),[eE,ek]=(0,n.useState)(null),[eH,eO]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{try{ew(!0);let[e,t]=await Promise.all([(0,Y.C)(),(0,k.S)()]);ej(e),eC(t);let i=()=>{let t=localStorage.getItem("default_office_id");return t?Number(t):e[0].id};e.length>0&&(q(i()),es(e.find(e=>e.id==i()).timeZone));let a=await (0,E.g)({officeId:i()});eA(a.data),a.data.length>0&&(_(a.data[0].id),eo(a.data[0].size))}catch(e){eS("Ошибка загрузки данных","error")}finally{ew(!1)}})()},[]),(0,n.useEffect)(()=>{if("edit"===i&&a){z(a.name),F(a.description),_(a.meetingRoomId),K(I()(a.date)),ei(I()(`${a.date} ${a.timeStart}`)),er(I()(`${a.date} ${a.timeEnd}`)),a.recurrenceType&&(eY(!0),ek({repeatType:a.recurrenceType,frequency:a.recurrenceInterval,endDate:a.recurrenceEnd})),J(eb.filter(e=>a.employeeIds.includes(e.id)));let e=ey.find(e=>e.id===a.meetingRoomId);e&&(eo(e.size),ep(e.isPublic?"public":"private"),q(e.office.id),es(e.office.timeZone))}},[i,a,eb,ey]),(0,n.useEffect)(()=>{et&&ea?ef(et.isAfter(ea)):ef(!1);let e=e=>!!e&&(6>e.hour()||e.hour()>=22);if(et&&ea){let t=et.isAfter(ea)||e(et)||e(ea);ef(t)}else ef(!1)},[et,ea]);let eP=async e=>{let t=Number(e.target.value);q(t);let i=eg.find(e=>e.id===t);i&&es(i.timeZone);try{ew(!0);let e=await (0,E.g)({officeId:t});eA(e.data),e.data.length>0?(_(e.data[0].id),eo(e.data[0].size)):(_(null),eo(0))}catch(e){eS("Ошибка загрузки комнат","error")}finally{ew(!1)}},eR=e=>{J(t=>t.filter(t=>t.id!==e.id))},eB=()=>{N(null),z(""),F(""),J([]),K(I()()),ee(I()()),ei(I()().set("hour",6).set("minute",0).set("second",0)),er(I()().set("hour",6).set("minute",30).set("second",0)),es(0),eo(0),ec(!1),eh(!1),ek(null),eY(!1)},eW=()=>{eB(),t()},eN=async()=>{if(!L||!G||!X||!et||!ea){eS("Заполните все поля","error");return}if(X&&X.isBefore(I()(),"day")){eS("Дата не может быть раньше сегодняшнего дня","error");return}if(eM){eS("Комната переполнена","error");return}if(em){eS("Время начала не может быть позже времени окончания","error");return}let e={name:L,description:V,date:X.format("YYYY-MM-DD"),timeStart:et.format("HH:mm:ss"),timeEnd:ea.format("HH:mm:ss"),authorId:e$.id,meetingRoomId:G,employeeIds:U.map(e=>e.id),recurrenceType:eE?.repeatType,recurrenceInterval:eE?.frequency,recurrenceEnd:eE?.endDate};try{"create"===i?(await (0,H.lh)(e),eS("Мероприятие успешно создано","success")):"edit"===i&&D&&(await (0,H.qM)(D,e),eS("Мероприятие успешно обновлено","success")),eB(),t()}catch(e){eS("Произошла ошибка при сохранении мероприятия","error")}finally{eB(),t()}};return(0,r.jsx)($.ThemeProvider,{theme:M.A,children:(0,r.jsx)(l.A,{open:e,scroll:"paper",slotProps:{paper:{className:"dialog-container",sx:{margin:B?"0":"32px",height:B?"100%":"calc(100% - 60px * 2)"}}},children:(0,r.jsxs)("div",{className:"event-form-content",children:[(0,r.jsxs)("div",{className:"event-form-title-container",children:[(0,r.jsxs)("div",{className:"event-form-title-container-main",children:[(0,r.jsxs)("div",{className:"event-form-title",style:{display:"create"===i?"flex":"none"},children:[(0,r.jsx)("img",{src:"/images/add-event.svg",alt:""}),(0,r.jsx)(o.A,{variant:"h5",children:"Новое мероприятие"})]}),(0,r.jsxs)("div",{className:"event-form-title",style:{display:"edit"===i?"flex":"none"},children:[(0,r.jsx)("img",{src:"/images/edit-event.svg",alt:""}),(0,r.jsx)(o.A,{variant:"h5",children:"Редактировать мероприятие"})]}),(0,r.jsx)("img",{src:"/images/cross.svg",alt:"",style:{cursor:"pointer"},onClick:eW})]}),(0,r.jsxs)("div",{className:"event-form-info",children:[(0,r.jsxs)("div",{className:"event-form-info-item",children:[(0,r.jsx)("img",{src:"/images/time.svg",alt:""}),(0,r.jsxs)(o.A,{children:["UTC ",en>=0?"+"+en:en,":00"]})]}),(0,r.jsxs)("div",{className:"event-form-info-item",children:[(0,r.jsx)("img",{src:"/images/people.svg",alt:""}),(0,r.jsxs)(o.A,{children:[el," человек"]})]})]})]}),(0,r.jsx)("div",{className:"event-form-scroll-box",children:(0,r.jsxs)("div",{className:"event-form-fields",children:[(0,r.jsxs)($.Box,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,r.jsx)(o.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Название"}),(0,r.jsx)(d.A,{value:L,onChange:e=>z(e.target.value),fullWidth:!0,placeholder:"Название мероприятия",sx:{borderRadius:"0px",height:"50px"}})]}),(0,r.jsxs)($.Box,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,r.jsx)(o.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Описание"}),(0,r.jsx)(d.A,{multiline:!0,rows:3.5,value:V,onChange:e=>F(e.target.value),fullWidth:!0,placeholder:"Описание мероприятия",sx:{borderRadius:"0px",height:"100px"}})]}),(0,r.jsxs)($.Box,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,r.jsx)(o.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Офис"}),(0,r.jsx)(c.A,{fullWidth:!0,children:(0,r.jsx)(x.A,{value:Z,onChange:eP,displayEmpty:!0,variant:"outlined",sx:{borderRadius:"0px",height:"50px"},children:eg.map(e=>(0,r.jsx)(h.A,{value:e.id,children:e.name},e.id))})})]}),(0,r.jsx)($.Box,{sx:{display:"flex",gap:3},children:(0,r.jsxs)($.Box,{sx:{display:"flex",flexDirection:"column",gap:.5,flex:6},children:[(0,r.jsx)(o.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Комната"}),(0,r.jsx)(c.A,{fullWidth:!0,children:(0,r.jsx)(x.A,{value:ev?0:G,onChange:e=>{let t=Number(e.target.value);_(t);let i=ey.find(e=>e.id===t);i&&(eo(i.size),J(i.employees),eh(i.employees.length>0))},displayEmpty:!0,variant:"outlined",sx:{borderRadius:"0px",height:"50px"},children:ev?(0,r.jsx)(h.A,{value:0,children:"Загрузка..."}):ey.map(e=>(0,r.jsx)(h.A,{value:e.id,children:e.name},e.id))})})]})}),(0,r.jsxs)($.Box,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,r.jsxs)($.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(o.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Участники"}),eM&&(0,r.jsx)(o.A,{color:"error",children:"Комната переполнена"})]}),(0,r.jsx)(c.A,{fullWidth:!0,children:(0,r.jsx)(u.A,{multiple:!0,options:eb,getOptionLabel:e=>e.fullName,value:U,disabled:ex,onChange:(e,t)=>{J(t)},noOptionsText:"Не найдено",renderInput:e=>(0,r.jsx)(p.A,{...e,placeholder:"Фио сотрудника",sx:{"& .MuiOutlinedInput-root":{borderRadius:"0px",minHeight:"50px",padding:"4px 8px",...eM&&{borderColor:"error.main","& .MuiOutlinedInput-notchedOutline":{borderColor:"error.main"}}},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"0px"}}}),renderTags:e=>(0,r.jsx)($.Box,{sx:{display:"flex",flexWrap:"wrap",gap:.75},children:e.map(e=>(0,r.jsx)(m.A,{label:e.fullName,disabled:ex,onDelete:()=>eR(e),onMouseDown:e=>e.stopPropagation(),sx:{borderRadius:"0px",height:"30px"}},e.id))}),isOptionEqualToValue:(e,t)=>e.id===t.id,PopperComponent:e=>(0,r.jsx)(f.A,{...e,sx:{maxHeight:"200px",overflowY:"auto"}})})})]}),(0,r.jsxs)($.Box,{sx:{display:"flex",gap:3,justifyContent:"space-between",alignItems:"end"},children:[(0,r.jsxs)($.Box,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,r.jsx)(o.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Дата начала"}),(0,r.jsx)(w.LocalizationProvider,{dateAdapter:b.AdapterDayjs,adapterLocale:"ru",children:(0,r.jsx)(C.DatePicker,{value:X,onChange:e=>K(e),minDate:I()(),slots:{textField:p.A},slotProps:{textField:{variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"0px",height:"50px"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"0px"}}}}})})]}),(0,r.jsxs)($.Box,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,r.jsx)(o.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Время начала"}),(0,r.jsx)(w.LocalizationProvider,{dateAdapter:b.AdapterDayjs,adapterLocale:"ru",children:(0,r.jsx)(S.TimePicker,{value:et,onChange:e=>ei(e),minTime:I()().set("hour",6).set("minute",0),maxTime:I()().set("hour",22).set("minute",0),skipDisabled:!0,shouldDisableTime:(e,t)=>{let i=e.hour();return i<6||i>22},slots:{textField:p.A},slotProps:{textField:{variant:"outlined",error:em,sx:{"& .MuiOutlinedInput-root":{borderRadius:"0px",height:"50px"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"0px"}}}}})})]}),(0,r.jsxs)($.Box,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,r.jsx)(o.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Время окончания"}),(0,r.jsx)(w.LocalizationProvider,{dateAdapter:b.AdapterDayjs,adapterLocale:"ru",children:(0,r.jsx)(S.TimePicker,{value:ea,onChange:e=>er(e),minTime:I()().set("hour",6).set("minute",0),maxTime:I()().set("hour",22).set("minute",0),skipDisabled:!0,shouldDisableTime:(e,t)=>{let i=e.hour();return i<6||i>22},slots:{textField:p.A},slotProps:{textField:{variant:"outlined",error:em,sx:{"& .MuiOutlinedInput-root":{borderRadius:"0px",height:"50px"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"0px"}}}}})})]}),(0,r.jsxs)($.Box,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsxs)($.Box,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(g.A,{checked:eT,onClick:()=>{if(eT){eY(!1);return}eY(!0),eO(!0)}}),(0,r.jsxs)($.Box,{sx:{display:"flex",flexDirection:"column"},children:[(0,r.jsx)(o.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Повторять"}),(0,r.jsx)(o.A,{variant:"body1",color:"primary",onClick:()=>eO(!0),sx:{display:eT?"block":"none",cursor:"pointer"},children:"Изменить"})]})]}),(0,r.jsx)(R.A,{open:eH,onClose:()=>{eO(!1)},onSave:e=>{ek(e)},initialSettings:eE})]})]}),(0,r.jsxs)($.Box,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,r.jsxs)($.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(o.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Занятость комнаты"}),eD&&(0,r.jsx)(o.A,{color:"error",children:"Событие пересекается с существующими"})]}),(0,r.jsxs)($.Box,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,r.jsxs)($.Box,{sx:{display:"flex",gap:1.5,height:"40px",border:"#A3A3A3 1px solid",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(j.A,{color:"secondary",sx:{backgroundColor:"#eee",padding:"4px"},onClick:()=>ee(Q.add(-1,"day")),children:(0,r.jsx)(A.A,{fontSize:"small"})}),(0,r.jsx)(w.LocalizationProvider,{dateAdapter:b.AdapterDayjs,adapterLocale:"ru",children:(0,r.jsx)(C.DatePicker,{value:Q,slots:{textField:p.A},format:"dddd, D MMMM",open:ed,onOpen:()=>ec(!0),onClose:()=>ec(!1),onChange:e=>{e&&ee(e)},slotProps:{textField:{onClick:()=>ec(!0),InputProps:{endAdornment:null,readOnly:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"0px",border:"none"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"0px",border:"none"},"& .MuiInputBase-input":{cursor:"pointer",userSelect:"none"}}}}})}),(0,r.jsx)(j.A,{color:"secondary",sx:{backgroundColor:"#eee",padding:"4px"},onClick:()=>ee(Q.add(1,"day")),children:(0,r.jsx)(v.A,{fontSize:"small"})})]}),(0,r.jsx)($.Box,{sx:{display:"flex",height:"150px",border:"#A3A3A3 1px solid",padding:"20px",background:"#F4F4F4"},children:(0,r.jsx)(T.A,{date:Q.format("YYYY-MM-DD"),roomId:G,currentEvent:{id:W,date:X,timeStart:et,timeEnd:ea,idRoom:G},onOverlapCheck:e=>{eI(e)}})})]})]}),(0,r.jsxs)($.Box,{sx:{display:"flex",gap:2.5},children:[(0,r.jsxs)(y.A,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{height:"50px"},onClick:eW,children:[(0,r.jsx)("img",{src:"/images/cancel-icon.svg",alt:"icon",style:{marginRight:10}}),"Отменить"]}),(0,r.jsxs)(y.A,{variant:"contained",color:"primary",fullWidth:!0,sx:{height:"50px",display:"edit"===i?"flex":"none"},onClick:eN,children:[(0,r.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"currentColor",style:{marginRight:10},children:(0,r.jsx)("path",{d:"M18 4.5V16.5C18 17.05 17.8042 17.5208 17.4125 17.9125C17.0208 18.3042 16.55 18.5 16 18.5H2C1.45 18.5 0.979167 18.3042 0.5875 17.9125C0.195833 17.5208 0 17.05 0 16.5V2.5C0 1.95 0.195833 1.47917 0.5875 1.0875C0.979167 0.695833 1.45 0.5 2 0.5H14L18 4.5ZM16 5.35L13.15 2.5H2V16.5H16V5.35ZM9 15.5C9.83333 15.5 10.5417 15.2083 11.125 14.625C11.7083 14.0417 12 13.3333 12 12.5C12 11.6667 11.7083 10.9583 11.125 10.375C10.5417 9.79167 9.83333 9.5 9 9.5C8.16667 9.5 7.45833 9.79167 6.875 10.375C6.29167 10.9583 6 11.6667 6 12.5C6 13.3333 6.29167 14.0417 6.875 14.625C7.45833 15.2083 8.16667 15.5 9 15.5ZM3 7.5H12V4.5H3V7.5ZM2 5.35V16.5V2.5V5.35Z"})}),"Сохранить"]}),(0,r.jsxs)(y.A,{variant:"contained",color:"primary",fullWidth:!0,sx:{height:"50px",display:"create"===i?"flex":"none"},onClick:eN,children:[(0,r.jsx)("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:10},children:(0,r.jsx)("path",{d:"M9.6 14.5H11.4V10.9H15V9.1H11.4V5.5H9.6V9.1H6V10.9H9.6V14.5ZM10.5 19C9.255 19 8.085 18.7638 6.99 18.2913C5.895 17.8188 4.9425 17.1775 4.1325 16.3675C3.3225 15.5575 2.68125 14.605 2.20875 13.51C1.73625 12.415 1.5 11.245 1.5 10C1.5 8.755 1.73625 7.585 2.20875 6.49C2.68125 5.395 3.3225 4.4425 4.1325 3.6325C4.9425 2.8225 5.895 2.18125 6.99 1.70875C8.085 1.23625 9.255 1 10.5 1C11.745 1 12.915 1.23625 14.01 1.70875C15.105 2.18125 16.0575 2.8225 16.8675 3.6325C17.6775 4.4425 18.3188 5.395 18.7913 6.49C19.2638 7.585 19.5 8.755 19.5 10C19.5 11.245 19.2638 12.415 18.7913 13.51C18.3188 14.605 17.6775 15.5575 16.8675 16.3675C16.0575 17.1775 15.105 17.8188 14.01 18.2913C12.915 18.7638 11.745 19 10.5 19ZM10.5 17.2C12.51 17.2 14.2125 16.5025 15.6075 15.1075C17.0025 13.7125 17.7 12.01 17.7 10C17.7 7.99 17.0025 6.2875 15.6075 4.8925C14.2125 3.4975 12.51 2.8 10.5 2.8C8.49 2.8 6.7875 3.4975 5.3925 4.8925C3.9975 6.2875 3.3 7.99 3.3 10C3.3 12.01 3.9975 13.7125 5.3925 15.1075C6.7875 16.5025 8.49 17.2 10.5 17.2Z",fill:"white"})}),"Добавить"]})]})]})})]})})})};a()}catch(e){a(e)}})},80675:(e,t,i)=>{i.a(e,async(e,a)=>{try{i.d(t,{G:()=>o});var r=i(8732),n=i(82015),s=i(11564),l=e([s]);s=(l.then?(await l)():l)[0];let o=()=>{let[e,t]=(0,n.useState)(!1),[i,a]=(0,n.useState)({}),[l,o]=(0,n.useState)(null),d=e=>{t(!1),l&&(l(e),o(null))};return{confirm:(e={})=>(a(e),t(!0),new Promise(e=>{o(()=>e)})),ConfirmComponent:()=>(0,r.jsx)(s.A,{open:e,onClose:d,title:i.title||"Подтверждение",message:i.message||"Вы уверены?",confirmText:i.confirmText||"Да",cancelText:i.cancelText||"Нет"})}};a()}catch(e){a(e)}})},87111:(e,t,i)=>{i.d(t,{C:()=>a});let a=async()=>{try{let e=await fetch("http://127.0.0.1:8000/api/office",{method:"GET",headers:{"Content-Type":"application/json",jwt:`${localStorage.getItem("jwt")}`}});if(!e.ok)throw Error(`Ошибка: ${e.status}`);return await e.json()}catch(e){throw console.error("Ошибка при запросе офисов:",e),e}}}};